<Window x:Class="ZipImageViewer.SettingsWindow" x:Name="SettingsWin"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ZipImageViewer" mc:Ignorable="d"
        Width="800" Height="600"
        Background="#FF333333" Foreground="LightGray" WindowStartupLocation="CenterOwner"
        Title="Settings" UseLayoutRounding="True" Loaded="SettingsWin_Loaded">
    <local:PaddedGrid Padding="4" VerticalChildrenAlignment="Stretch" HorizontalChildrenAlignment="Stretch">
        <local:PaddedGrid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="1*"/>
            <ColumnDefinition Width="Auto"/>
        </local:PaddedGrid.ColumnDefinitions>
        <local:PaddedGrid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="3*"/>
            <RowDefinition Height="2*"/>
            <RowDefinition Height="Auto"/>
        </local:PaddedGrid.RowDefinitions>
        <local:PaddedGrid.Resources>
            <Style TargetType="TextBox">
                <Style.Setters>
                    <Setter Property="MinWidth" Value="300"/>
                    <Setter Property="MaxWidth" Value="500"/>
                </Style.Setters>
            </Style>
            <Style x:Key="TipTextStyle" TargetType="TextBlock">
                <Style.Setters>
                    <Setter Property="FontSize" Value="10"/>
                    <Setter Property="FontStyle" Value="Italic"/>
                    <Setter Property="Padding" Value="0 2"/>
                    <Setter Property="MaxWidth" Value="300"/>
                    <Setter Property="TextWrapping" Value="Wrap"/>
                </Style.Setters>
            </Style>
        </local:PaddedGrid.Resources>

        
        <TextBlock  Grid.Row="0" Grid.Column="0" Text="7-Zip Dll Path"/>
        <TextBox    Grid.Row="0" Grid.Column="1"
                    Text="{Binding Source={x:Static local:App.Setting}, Path=SevenZipDllPath}"/>
        <TextBlock  Grid.Row="0" Grid.Column="2" Style="{StaticResource TipTextStyle}" Text="The path to 7z.dll on the PC."/>

        
        <TextBlock  Grid.Row="1" Grid.Column="0" Text="Thumbnail Size"/>
        <StackPanel Grid.Row="1" Grid.Column="1" Orientation="Horizontal">
            <TextBox x:Name="TB_ThumbWidth" MinWidth="32" VerticalAlignment="Top"/>
            <TextBlock Text=" x "/>
            <TextBox x:Name="TB_ThumbHeight" MinWidth="32" VerticalAlignment="Top"/>
        </StackPanel>
        <TextBlock  Grid.Row="1" Grid.Column="2" Style="{StaticResource TipTextStyle}">
            <TextBlock.Inlines>
                <Bold>Width</Bold> x <Bold>Height</Bold> in pixels.<LineBreak/>
                The size ensures a minimum width or height (depending on the aspect ratio of the image) for decoding images to provide a higher thumbnail quality.<LineBreak/>
                <Bold>Changing this value invalidates the entire thumbnail cache.</Bold>
            </TextBlock.Inlines>
        </TextBlock>

        
        <TextBlock  Grid.Row="2" Grid.Column="0" Text="Thumbnail Database Size"/>
        <DockPanel  Grid.Row="2" Grid.Column="1">
            <Slider x:Name="SL_ThumbDbSize" Value="2" Minimum="0.1" Maximum="10" DockPanel.Dock="Top"/>
            <TextBlock HorizontalAlignment="Center">
                <TextBlock.Style>
                    <Style TargetType="TextBlock">
                        <Setter Property="Text" Value="{Binding ElementName=SL_ThumbDbSize, Path=Value, Mode=OneWay, StringFormat='\{0:#,0.0} GB'}"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding ElementName=SL_ThumbDbSize, Path=Value, Mode=OneWay}" Value="10">
                                <Setter Property="Text" Value="Unlimited"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </TextBlock.Style>
            </TextBlock>
        </DockPanel>
        <TextBlock  Grid.Row="2" Grid.Column="2" Style="{StaticResource TipTextStyle}">
            <TextBlock.Inlines>
                Maximum size limit of the thumbnail database.<LineBreak/>
                Setting it to Unlimited removes the limit on the application level.<LineBreak/>
                The database file is located at the same folder as the application executable.
            </TextBlock.Inlines>
        </TextBlock>

        
        <TextBlock  Grid.Row="4" Grid.Column="0" Text="Saved Passwords"/>
        <TabControl Grid.Row="4" Grid.Column="1">
            <TabItem Header="Fallback Passwords">
                <DataGrid AutoGenerateColumns="False"
                          ItemsSource="{Binding Source={x:Static local:App.Setting}, Path=FallbackPasswords}">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Password" Binding="{Binding}"/>
                    </DataGrid.Columns>
                </DataGrid>
            </TabItem>
            <TabItem Header="Mapped Passwords">
                <DataGrid AutoGenerateColumns="False"
                          ItemsSource="{Binding Source={x:Static local:App.Setting}, Path=MappedPasswords}">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Password" Binding="{Binding Value}"/>
                        <DataGridTextColumn Header="File Path" Binding="{Binding Key}"/>
                    </DataGrid.Columns>
                </DataGrid>
            </TabItem>
        </TabControl>
        <TextBlock  Grid.Row="4" Grid.Column="2" Style="{StaticResource TipTextStyle}">
            <TextBlock.Inlines>
                Saved passwords for zipped files.<LineBreak/>
                One on each line with the below formats:<LineBreak/>
                <Bold>password</Bold>=<LineBreak/>
                <Bold>file_full_path</Bold>=<Bold>password</Bold>
                <LineBreak/>
                <LineBreak/>
                Using the format without <Bold>file_full_path</Bold> indicates a fallback password to try on any files not included in this section."
            </TextBlock.Inlines>
        </TextBlock>

        
        <TextBlock  Grid.Row="3" Grid.Column="0" Text="Transition Animation"/>
        <StackPanel Grid.Row="3" Grid.Column="1">
            <ComboBox x:Name="CB_ViewerTransition"/>
            <DockPanel Margin="0 4 0 0">
                <TextBlock Text="Speed" VerticalAlignment="Center"/>
                <ComboBox x:Name="CB_AnimSpeed" Margin="10 0 0 0" MinWidth="32"/>
            </DockPanel>
        </StackPanel>
        <TextBlock  Grid.Row="3" Grid.Column="2" Style="{StaticResource TipTextStyle}">
            <TextBlock.Inlines>
                The transition animation used in the viewer.<LineBreak/>
                Speed affects the length of time the animations are played.
            </TextBlock.Inlines>
        </TextBlock>

        
        <TextBlock  Grid.Row="5" Grid.Column="0" Text="Custom Commands"/>
        <DataGrid   Grid.Row="5" Grid.Column="1" AutoGenerateColumns="False"
                    ItemsSource="{Binding Source={x:Static local:App.Setting}, Path=CustomCommands}">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Path" Binding="{Binding Item1}"/>
                <DataGridTextColumn Header="Arguments" Binding="{Binding Item2}"/>
            </DataGrid.Columns>
        </DataGrid>
        <TextBlock  Grid.Row="5" Grid.Column="2" Style="{StaticResource TipTextStyle}">
            <TextBlock.Inlines>
                Commands used in right-click menu. One in each line.<LineBreak/>
                <Bold>%file%</Bold> - Path to the current file.
            </TextBlock.Inlines>
        </TextBlock>

        
        <StackPanel Grid.Row="100" Grid.ColumnSpan="3" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button x:Name="Btn_OK" Content="OK" MinWidth="50" MinHeight="22" Click="Btn_OK_Click"/>
            <Button x:Name="Btn_Cancel" Content="Cancel" MinWidth="50" MinHeight="22" Margin="4 0 0 0" IsCancel="True" Click="Btn_Cancel_Click"/>
        </StackPanel>
    </local:PaddedGrid>
</Window>
